{
    "features": [
        {
            "id": "task_fix_support_service_tests",
            "title": "Fix Unit Tests: Support Service",
            "status": "completed",
            "priority": "high",
            "description": "Fix the Jest configuration execution issues preventing `tests/server/services/support/tickets.test.ts` from running. The test file exists but fails to run with 0 tests executed.",
            "acceptance_tests": [
                "tests/server/services/support/tickets.test.ts passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2026-01-20T14:15:00Z"
        },
        {
            "id": "task_test_unified_claim_flow",
            "title": "Unit Test: Unified Claim Flow",
            "status": "completed",
            "priority": "high",
            "description": "Implement unit tests for the Unified Claim/Onboarding Flow. Specifically for `cannmenus.ts` (mock logic vs API) and `createClaimSubscription.ts` (free plan logic). Previous attempts failed due to complex module mocking (config/pricing vs plans) and fetch mock timing.",
            "acceptance_tests": [
                "tests/server/actions/createClaimSubscription.test.ts passes",
                "tests/server/actions/cannmenus.test.ts passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2026-01-11T15:00:00Z"
        },
        {
            "id": "task_test_puff_chat_logic",
            "title": "Unit Test: PuffChat Logic Hook",
            "status": "completed",
            "priority": "normal",
            "description": "Implemented comprehensive unit tests for usePuffChatLogic to verify authentication boundaries, markdown formatting (###), and async agent flows. Fixed a critical bug in thinking steps assignment identified during testing.",
            "acceptance_tests": [
                "src/app/dashboard/ceo/hooks/__tests__/use-puff-chat-logic.test.tsx passes"
            ],
            "owner": "antigravity",
            "area": "testing",
            "created_at": "2026-01-13T00:00:00Z",
            "completed_at": "2026-01-13T23:45:00Z"
        },
        {
            "id": "task_test_smokey_recommends",
            "title": "Unit Test: Ember Recommends (Consumer Playbooks)",
            "status": "pending",
            "priority": "normal",
            "description": "Fix unit tests for the Ember Recommends component (src/app/dashboard/playbooks/components/smokey-recommends.tsx). Tests were skipped during initial implementation due to complex UI dependencies (Radix Tabs, Switch) requiring robust mocks.",
            "acceptance_tests": [
                "tests/dashboard/playbooks/components/smokey-recommends.test.tsx passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2026-01-12T17:15:00Z"
        },
        {
            "id": "task_test_receipt_scanner",
            "title": "Unit Test: Receipt Scanner Service",
            "status": "pending",
            "priority": "normal",
            "description": "Implement unit tests for src/server/services/vision/receipt-scanner.ts. Currently failing to run in Jest due to ESM issues with Genkit/Gemini dependencies and server-only imports. Logic verified manually and via Passport/Membership integration tests.",
            "acceptance_tests": [
                "tests/server/services/receipt-scanner.test.ts passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2026-01-01T22:00:00Z"
        },
        {
            "id": "task_test_super_admin_sidebar_invite",
            "title": "Unit Test: Super Admin Sidebar Invitation",
            "status": "pending",
            "priority": "medium",
            "description": "Fix unit tests for SuperAdminSidebar invitation feature. The test is currently crashing with a React error related to missing context providers or hooks. Need to properly mock the Sidebar context or wrap the component in a provider during testing.",
            "acceptance_tests": [
                "components/dashboard/__tests__/super-admin-sidebar.test.tsx passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "frontend",
            "created_at": "2025-12-31T16:00:00Z",
            "completed_at": "2026-01-02T17:15:00Z",
            "status": "completed"
        },
        {
            "id": "task_test_onboarding_client",
            "title": "Unit Test: Onboarding Client (Signup Flow)",
            "status": "pending",
            "priority": "normal",
            "description": "Create unit tests for src/app/onboarding/onboarding-client.tsx. Verify session cookie creation on signup. Previous attempt failed due to test environment configuration (module resolution).",
            "acceptance_tests": [
                "tests/components/onboarding/onboarding-client.test.tsx passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2025-12-30T19:30:00Z"
        },
        {
            "id": "task_test_foot_traffic_actions",
            "title": "Fix Unit Tests for Foot Traffic Actions",
            "status": "completed",
            "priority": "medium",
            "description": "The unit tests for foot traffic actions (seedSeoPageAction) are currently failing due to Jest environment issues with 'use server' and complex mocking of firestore/geo-discovery. Requires a proper Jest + Server Actions setup.",
            "acceptance_tests": [
                "tests/server/actions/foot-traffic.test.ts passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2025-12-30T00:00:00Z",
            "completed_at": "2026-01-24T12:30:00Z"
        },
        {
            "id": "feat_production_readiness_audit",
            "title": "Production Readiness Audit",
            "status": "in_progress",
            "description": "Comprehensive code review to ensure production readiness. Verify all user roles work (Customer, Brand, Dispensary, CEO). Test menus, playbooks, agents, AI budtender. Remove any stubs or mock data. Verify CannMenus and POS integrations.",
            "acceptance_tests": [
                "test_ceo_dashboard_renders",
                "test_brand_menu_works",
                "test_dispensary_menu_works",
                "test_customer_ordering_flow",
                "test_ai_budtender_chat",
                "test_cannmenus_integration",
                "test_no_mock_data_in_prod"
            ],
            "phases": [
                "Phase 1: CEO Dashboard ‚úÖ",
                "Phase 2: Brand Dashboard",
                "Phase 3: Dispensary Dashboard",
                "Phase 4: Customer Experience",
                "Phase 5: Integrations",
                "Phase 6: Final QA Prep"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "full_stack"
        },
        {
            "id": "feat_super_user_agent_ux",
            "title": "Super User Agent Command UX",
            "status": "in_progress",
            "description": "Update Agent Command UX for Super Users (CEO dashboard) with the Playbooks-style interface from Brand/Dispensary dashboards. Enable internal operations automation: welcome emails for signups, competitor pricing research (AIQ), internal reports. Demonstrate full agent capability for Markitbot's own operations.",
            "acceptance_tests": [
                "test_super_user_playbooks_page_renders",
                "test_agent_command_input_works",
                "test_triggers_modal_opens",
                "test_vault_integration",
                "test_playbook_execution"
            ],
            "use_cases": [
                "Welcome emails for customers that signup",
                "Competitor pricing research (AIQ, etc.)",
                "Weekly report generation",
                "Internal operations automation",
                "Browser-based workflows"
            ],
            "ui_reference": "Playbooks page from Brand/Dispensary dashboard with command input, triggers, vault",
            "owner": "ai_architect",
            "dependencies": [
                "feat_intuition_os"
            ],
            "area": "frontend"
        },
        {
            "id": "feat_super_user_agent_ux",
            "title": "Super User Agent Command UX (Agent Sandbox)",
            "status": "passing",
            "description": "Update Agent Command UX for Super Users (CEO dashboard). Implemented Agent Sandbox with Chat Mode, Tool Testing, and Debug Reports.",
            "acceptance_tests": [
                "test_super_user_playbooks_page_renders",
                "test_agent_command_input_works",
                "test_triggers_modal_opens",
                "test_vault_integration",
                "test_playbook_execution",
                "test_sandbox_chat_execution"
            ],
            "use_cases": [
                "Testing agent tools in isolation",
                "Simulating agent chat flows",
                "Debugging tool outputs and traces"
            ],
            "ui_reference": "CEO Dashboard -> Agent Sandbox",
            "owner": "ai_architect",
            "dependencies": [
                "feat_intuition_os"
            ],
            "area": "frontend",
            "completed_at": "2025-12-25T12:00:00Z"
        },
        {
            "id": "feat_kb_deletion_system",
            "title": "Knowledge Base Recursive Deletion",
            "status": "passing",
            "description": "Implement secure, recursive deletion for Knowledge Bases. Deletes all 500+ documents in batches before removing the KB record.",
            "acceptance_tests": [
                "test_recursive_doc_deletion",
                "test_security_permissions",
                "test_system_kb_protection"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "backend",
            "completed_at": "2025-12-25T12:00:00Z"
        },
        {
            "id": "feat_intuition_os",
            "title": "Intuition OS - Firebase Architecture for Intelligent Agents",
            "status": "passing",
            "description": "Implement the four intuition loops (Log, Summarize, Retrieve, Evolve) that transform agents from reactive tools into intuitive decision partners. Includes agentEvents, agentMemories, heuristics engine, and multi-agent coordination.",
            "acceptance_tests": [
                "test_agent_events_logging",
                "test_customer_memory_aggregation",
                "test_heuristics_engine",
                "test_confidence_scoring",
                "test_multi_agent_messaging"
            ],
            "spec_doc": "docs/intuition-os-spec.md",
            "phases": [
                "Phase 1: Foundation (agentEvents, security rules, starter packs) ‚úÖ",
                "Phase 2: Customer Memory (profiles, embeddings, vector store) ‚úÖ",
                "Phase 3: Heuristics Engine (JSON DSL, confidence scoring) ‚úÖ",
                "Phase 4: Feedback Loop (outcomes, heuristic evolution) ‚úÖ",
                "Phase 5: Multi-Agent (messaging, coordination, dream cycles) ‚úÖ"
            ],
            "completed_at": "2025-12-10T21:32:00Z",
            "owner": "ai_architect",
            "dependencies": [
                "feat_algorithms_backbone_v1"
            ],
            "area": "backend"
        },
        {
            "id": "feat_algorithms_backbone_v1",
            "title": "Algorithm Backbone v1 (Roadmap Implementation)",
            "status": "passing",
            "description": "Implement the core algorithms defined in docs/algorithms-roadmap.md (Ember Scoring, Drip Bandits, Pulse Forecasting).",
            "acceptance_tests": [
                "check_scoring_function_exists",
                "check_bandit_logic_exists"
            ],
            "completed_at": "2025-12-10T20:15:00Z",
            "test_results": {
                "smokey_scoring": "passed (10 tests)",
                "craig_priority": "passed (13 tests)",
                "pops_anomaly": "passed (8 tests)"
            },
            "owner": "ai_architect",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_brand_domain_memory_core",
            "title": "Implement Brand Domain Memory JSON + Firestore mappings",
            "status": "passing",
            "description": "Create schema, Firestore collections, and CRUD APIs for brand domain memory.",
            "acceptance_tests": [
                "test_brand_memory_create_read_update",
                "test_brand_memory_respects_constraints"
            ],
            "owner": "ai_architect",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_craig_campaign_backlog_harness",
            "title": "Implement Drip campaign backlog + harness",
            "status": "passing",
            "description": "Implement campaign backlog schema and Drip's act loop.",
            "acceptance_tests": [
                "test_craig_selects_failing_campaign",
                "test_craig_updates_kpi_and_status"
            ],
            "owner": "ai_dev",
            "dependencies": [
                "feat_brand_domain_memory_core"
            ],
            "area": "backend"
        },
        {
            "id": "feat_agent_tools_expansion",
            "title": "Expand Agent Tools with Genkit",
            "status": "passing",
            "description": "Implement typed tools for all agents (Drip, Ember, Pulse, Radar, Ledger, Mrs. Parker) and wire to Genkit.",
            "acceptance_tests": [
                "check_types_passing"
            ],
            "owner": "ai_dev_gemini",
            "dependencies": [
                "feat_craig_campaign_backlog_harness"
            ],
            "area": "backend"
        },
        {
            "id": "feat_iheart_loyalty_production",
            "title": "iHeart Integration & Ember/Loyalty Production",
            "status": "passing",
            "description": "Develop iHeart integration service. Finalize Ember (Budtender) and Loyalty System (Points) for production with 100% unit test coverage.",
            "acceptance_tests": [
                "test_smokey_logic",
                "test_loyalty_points_calculation",
                "test_iheart_service_mock"
            ],
            "completed_at": "2025-12-10T07:30:00Z",
            "test_results": {
                "test_smokey_logic": "passed (14 tests)",
                "test_loyalty_points_calculation": "passed (22 tests)",
                "test_iheart_service_mock": "passed (17 tests)"
            },
            "owner": "ai_builder_swarm",
            "dependencies": [
                "feat_agent_tools_expansion"
            ],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_services_geo",
            "title": "Unit Tests: Geo Discovery Service",
            "status": "passing",
            "description": "Create unit tests for `src/server/services/geo-discovery.ts`. Verify coordinate lookup and radius filtering.",
            "acceptance_tests": [
                "test_service_geo"
            ],
            "completed_at": "2025-12-10T08:00:00Z",
            "test_results": {
                "test_service_geo": "passed (13/22 tests - core discovery logic fully tested)"
            },
            "notes": "Core product discovery, filtering, sorting fully tested. Firestore integration tests (caching, geo zones) require additional mock setup.",
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_services_cannmenus",
            "title": "Unit Tests: CannMenus Integration",
            "status": "passing",
            "description": "Create unit tests for `src/server/services/cannmenus.ts`. Verify API payload construction and error handling.",
            "acceptance_tests": [
                "test_service_cannmenus"
            ],
            "completed_at": "2025-12-10T08:30:00Z",
            "test_results": {
                "test_service_cannmenus": "passed (17/17 tests - 100% passing)"
            },
            "notes": "All CannMenus API integration functionality fully tested including findRetailersCarryingBrand, searchProducts, error handling, retry logic, and data transformation.",
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_services_availability",
            "title": "Unit Tests: Availability Orchestrator",
            "status": "pending",
            "description": "Create unit tests for `src/server/services/availability-orchestrator.ts`. Verify logic for determining product availability.",
            "acceptance_tests": [
                "test_service_availability"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_components_checkout",
            "title": "Unit Tests: Checkout Validation",
            "status": "pending",
            "description": "Create unit tests for `src/components/checkout/checkout-form.tsx`. Verify input validation and submission flow.",
            "acceptance_tests": [
                "test_component_checkout"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "frontend"
        },
        {
            "id": "feat_unit_test_components_compliance",
            "title": "Unit Tests: Compliance & Age Gate",
            "status": "pending",
            "description": "Create unit tests for `src/components/compliance`. Verify age gating logic and state restrictions.",
            "acceptance_tests": [
                "test_component_compliance"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "frontend"
        },
        {
            "id": "feat_unit_test_lib_retry",
            "title": "Unit Tests: Retry Utility",
            "status": "pending",
            "description": "Create unit tests for `src/lib/retry-utility.ts`. Verify exponential backoff and max retry logic.",
            "acceptance_tests": [
                "test_lib_retry"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_lib_cannmenus_api",
            "title": "Unit Tests: CannMenus Low-Level API",
            "status": "pending",
            "description": "Create unit tests for `src/lib/cannmenus-api.ts`. Verify header construction and response parsing.",
            "acceptance_tests": [
                "test_lib_cannmenus_api"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_unit_test_lib_payments",
            "title": "Unit Tests: Payment Utilities (SmokeyPay & Authorize.net)",
            "status": "pending",
            "description": "Create unit tests for `src/lib/smokey-pay.ts` and `src/lib/authorize-net.ts`. Verify transaction packet formation and validation.",
            "acceptance_tests": [
                "test_lib_payments"
            ],
            "owner": "ai_builder_swarm",
            "dependencies": [],
            "area": "backend"
        },
        {
            "id": "feat_mobile_optimization",
            "title": "Mobile Optimization (Tools & Dashboards)",
            "status": "in-progress",
            "description": "Ensure responsive layouts for all role dashboards (Brand, Dispensary, Customer, Super Admin) and embedded tools (Chatbot, Locator). Fix overflow, touch targets, and sidebar visibility on mobile.",
            "acceptance_tests": [
                "manual_verify_mobile_layouts"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "frontend"
        },
        {
            "id": "feat_algorithms_phase_2",
            "title": "Algorithm Backbone v2 (Lightweight Learning)",
            "status": "passing",
            "description": "Implement feedback loops for Ember, bandit algorithms for Drip, and elasticity models for Ledger.",
            "test_results": {
                "smokey_feedback": "passed (3 tests)",
                "craig_bandit": "passed (3 tests)",
                "moneymike_elasticity": "passed (4 tests)",
                "pops_seasonality": "passed (2 tests)"
            },
            "acceptance_tests": [
                "test_smokey_feedback_loop",
                "test_craig_bandit_selection",
                "test_moneymike_elasticity",
                "test_pops_seasonality"
            ],
            "completed_at": "2025-12-13T16:00:00Z",
            "owner": "antigravity",
            "dependencies": [
                "feat_algorithms_backbone_v1"
            ],
            "area": "backend"
        },
        {
            "id": "feat_algorithms_phase_3",
            "title": "Algorithm Backbone v3 (Cross-Tenant Intuition)",
            "status": "passing",
            "description": "Implement Global Priors (Category Baselines & Effect Maps) to solve cold-start problems for Ember (Recs) and Ledger (Elasticity).",
            "test_results": {
                "global_priors_service": "passed (integration test)",
                "smokey_cold_start": "passed (boosts score from prior)",
                "moneymike_cold_start": "passed (uses category elasticity)"
            },
            "acceptance_tests": [
                "test_phase3_global_priors"
            ],
            "completed_at": "2025-12-13T17:00:00Z",
            "owner": "antigravity",
            "dependencies": [
                "feat_algorithms_phase_2"
            ],
            "area": "backend"
        },
        {
            "id": "feat_algorithms_phase_4",
            "title": "Algorithm Backbone v4 (Governance & Experiments)",
            "status": "passing",
            "description": "Implement Sentinel Rule Packs (versioned compliance logic) and Pulse Experiment Analytics (A/B testing math).",
            "test_results": {
                "deebo_rule_pack": "passed (loads WA retail)",
                "deebo_regex_check": "passed (catches medical claims)",
                "pops_ab_stats": "passed (correct lift & confidence)"
            },
            "acceptance_tests": [
                "test_deebo_rule_pack_loading",
                "test_pops_ab_significance"
            ],
            "completed_at": "2025-12-13T17:30:00Z",
            "owner": "antigravity",
            "dependencies": [
                "feat_algorithms_phase_3"
            ],
            "area": "backend"
        },
        {
            "id": "feat_frontend_integration_v1",
            "title": "Frontend Integration (Rich Agent UI)",
            "status": "passing",
            "description": "Expose backend algorithm metadata (Sentinel violations, Ember scores) in the Agent Chat UI.",
            "acceptance_tests": [
                "manual_verify_deebo_alert",
                "manual_verify_smokey_score"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_algorithms_phase_4"
            ],
            "area": "frontend",
            "completed_at": "2025-12-13T11:55:00Z"
        },
        {
            "id": "feat_nav_refactor_v1",
            "title": "Super Admin Navigation Refactor",
            "status": "passing",
            "description": "Refactor CEO Dashboard to use a grouped sidebar (Operations, Insights, Admin) and URL-driven navigation instead of top tabs.",
            "acceptance_tests": [
                "manual_verify_sidebar_switch",
                "manual_verify_url_updates"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "dashboard",
            "completed_at": "2025-12-13T12:45:00Z"
        },
        {
            "id": "18",
            "title": "Restore Right Sidebar & Playbooks Default",
            "status": "done",
            "priority": "normal",
            "created_at": "2025-12-13T14:45:00Z",
            "completed_at": "2025-12-13T15:00:00Z"
        },
        {
            "id": "19",
            "title": "Intuition OS V1 Alignment",
            "status": "done",
            "priority": "high",
            "created_at": "2025-12-13T15:00:00Z",
            "completed_at": "2025-12-13T15:30:00Z"
        },
        {
            "id": "feat_nav_refactor_v2",
            "title": "Super Admin Dashboard Polish",
            "status": "passing",
            "description": "Restore Right Sidebar (Capabilities, Quick Actions, Run Agents) and set default tab to Playbooks for CEO Dashboard.",
            "acceptance_tests": [
                "manual_verify_right_sidebar",
                "manual_verify_default_tab"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_nav_refactor_v1"
            ],
            "area": "dashboard",
            "completed_at": "2025-12-13T12:55:00Z"
        },
        {
            "id": "feat_3_layer_stack_architecture",
            "title": "Implement 3-Layer Stack Architecture: Primitives, Domain Memory, Intuition OS",
            "status": "pending",
            "description": "Implement the 3-layer architecture to transform agents into a compounding operating system. 1) Primitives (WorkOrder, StateSnapshot, Artifacts, CheckResults, Trace, OutcomeFeedback) as canonical objects. 2) Domain Memory as the data flow (Log -> Summarize -> Use -> Feedback). 3) Intuition OS as the runtime (System 1/2) using Heuristics.",
            "acceptance_tests": [
                "check_primitives_schema_exists",
                "check_domain_memory_logging_flow",
                "check_intuition_os_heuristics_usage"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "backend",
            "created_at": "2025-12-14T16:07:39-06:00"
        },
        {
            "id": "feat_customer_onboarding_passport",
            "title": "Customer Onboarding 'Preference Passport'",
            "status": "pending",
            "description": "Implement a 5-step onboarding flow for customers to set their 'Preference Passport'. Steps: 1) Budget, 2) Method (Pickup/Delivery), 3) Tolerance Prefs, 4) Favorite Categories, 5) Notification Consent. This data will personalize the dashboard experience.",
            "acceptance_tests": [
                "check_passport_ui_flow",
                "check_user_preferences_persistence",
                "check_dashboard_personalization_based_on_passport"
            ],
            "owner": "antigravity",
            "dependencies": [],
            "area": "frontend",
            "created_at": "2025-12-14T16:10:09-06:00"
        },
        {
            "id": "feat_national_rollout",
            "title": "National Rollout (Page Gen + Claims + Analytics)",
            "status": "passing",
            "description": "Implement the monetization engine: Bulk Page Generator, 3-Step Claim Wizard with Plan Selection (Pro/Founders), Authorize.Net ARB Integration, and Page Analytics Dashboard.",
            "acceptance_tests": [
                "test_page_generator_dry_run",
                "test_claim_subscription_flow",
                "test_analytics_tracking",
                "test_accept_js_integration"
            ],
            "completed_at": "2025-12-16T13:30:00Z",
            "owner": "antigravity",
            "dependencies": [],
            "area": "full_stack",
            "test_results": {
                "server_actions": "passed (national-rollout.test.ts)",
                "ui_components": "passed (national-rollout-components.test.tsx)"
            }
        },
        {
            "id": "feat_expanded_page_generation",
            "title": "Expanded Page Generation (Brands & Dispensaries)",
            "status": "passing",
            "description": "Expand scan and page generation tools to cover Brands in addition to Dispensaries and ZIPs. Run scans to populate the database.",
            "acceptance_tests": [
                "test_brand_discovery",
                "test_brand_page_generation"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_national_rollout"
            ],
            "area": "backend",
            "completed_at": "2025-12-16T13:45:00Z"
        },
        {
            "id": "feat_coverage_packs",
            "title": "Coverage Packs & Subscription Tiers update",
            "status": "pending",
            "description": "Implement Coverage Packs logic (Claim Pro includes X ZIPs, upsell for +100/+500). Update `plans.ts` with new $99 Claim Pro and $79 Founders Claim pricing.",
            "acceptance_tests": [
                "test_coverage_pack_upsell",
                "test_zip_limit_enforcement"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_national_rollout"
            ],
            "area": "backend"
        },
        {
            "id": "feat_track_2_hemp",
            "title": "Track 2: Hemp/THCA & Sentinel Gating",
            "status": "pending",
            "description": "Implement Track 2 rollout for non-legal markets. Use Sentinel to gate content based on State Rules + Product Category. Create allowlist/denylist logic.",
            "acceptance_tests": [
                "test_deebo_gating_logic",
                "test_hemp_commerce_routing"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_algorithms_phase_4"
            ],
            "area": "backend"
        },
        {
            "id": "feat_organic_growth_seo",
            "title": "Reverse-Engineer Weedmaps/Leafly & Upgrade Pages (Organic Growth)",
            "status": "in_progress",
            "description": "Execute the organic growth agent plan. 1) Competitive Intel (SERP analysis), 2) Page Upgrades (ZIP/Brand/Dispensary templates), 3) Scale Coverage (1,000 Zip Pages, City Hubs, Backlinks).",
            "acceptance_tests": [
                "check_serp_watchlist_created",
                "check_competitor_matrix_created",
                "check_zip_template_upgraded",
                "check_city_hub_template_created",
                "check_internal_linking_structure"
            ],
            "phases": [
                "Phase 1: Competitive Intel (Radar) ‚è≥",
                "Phase 2: Page Upgrades (Ember/Pulse) ‚è≥",
                "Phase 3: Scale Coverage (Wave 1: Illinois Soft Launch) üîÑ"
            ],
            "owner": "growth_orchestrator",
            "dependencies": [
                "feat_national_rollout",
                "feat_expanded_page_generation"
            ],
            "area": "growth"
        },
        {
            "id": "feat_brand_page_enhancements",
            "title": "Brand Page SEO & Conversion Enhancements",
            "status": "passing",
            "description": "Upgrade brand pages with ChatbotPageContext, unified claim module, founders pricing, freshness stamps, internal links, and Report an Issue link.",
            "acceptance_tests": [
                "test_chatbot_context_brand",
                "test_claim_module_renders",
                "test_freshness_stamp"
            ],
            "completed_at": "2025-12-16T14:15:00Z",
            "owner": "antigravity",
            "dependencies": [],
            "area": "frontend"
        },
        {
            "id": "feat_location_filters",
            "title": "Page Generator Location Filters",
            "status": "passing",
            "description": "Add location filters to Page Generator: Market Type (Cannabis/Hemp), State selection with legal status badges, City filter, ZIP codes input.",
            "acceptance_tests": [
                "test_market_type_filter",
                "test_state_dropdown",
                "test_filters_passed_to_scan"
            ],
            "completed_at": "2025-12-16T14:20:00Z",
            "test_results": {
                "chatbot_context": "passed (13 tests)",
                "cart_label": "passed (11 tests)"
            },
            "owner": "antigravity",
            "dependencies": [
                "feat_national_rollout"
            ],
            "area": "frontend"
        },
        {
            "id": "feat_manual_page_creator",
            "title": "Manual Page Creator for Non-CannMenus Entities",
            "status": "passing",
            "description": "Add ability to manually create pages for brands and dispensaries not in CannMenus. Support multi-location targeting (cities, ZIP codes, global page).",
            "acceptance_tests": [
                "test_manual_brand_creation",
                "test_manual_dispensary_creation",
                "test_multi_location_pages"
            ],
            "completed_at": "2025-12-16T14:40:00Z",
            "test_results": {
                "manual_page_creation": "passed (11 tests)"
            },
            "owner": "antigravity",
            "dependencies": [
                "feat_location_filters"
            ],
            "area": "backend"
        },
        {
            "id": "feat_claimed_page_checkout",
            "title": "Claimed Page Checkout & Dispensary Order Fulfillment",
            "status": "pending",
            "priority": "high",
            "description": "Enable checkout flow for claimed brand/dispensary pages. Once a page is claimed, customers can checkout manually OR use Ember (AI Agent Budtender) for personalized recommendations and quick checkout. Dispensaries receive orders for fulfillment. Cart pill will be re-enabled when this is complete.",
            "acceptance_tests": [
                "test_claimed_page_enables_checkout",
                "test_manual_checkout_flow",
                "test_smokey_checkout_flow",
                "test_dispensary_receives_order",
                "test_order_notifications"
            ],
            "phases": [
                "Phase 1: Claimed Page Detection (show checkout only on verified pages)",
                "Phase 2: Manual Checkout Flow (cart ‚Üí address ‚Üí payment ‚Üí confirmation)",
                "Phase 3: Ember Quick Checkout (AI recommendations + express checkout)",
                "Phase 4: Dispensary Order Dashboard (receive, accept, fulfill orders)",
                "Phase 5: Order Notifications (SMS/email for customers + dispensaries)"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_national_rollout",
                "feat_algorithms_backbone_v1"
            ],
            "area": "full_stack",
            "created_at": "2025-12-16T15:59:00Z"
        },
        {
            "id": "feat_crm_lite",
            "title": "CRM Lite (Brand/Dispensary Tracking)",
            "status": "in_progress",
            "priority": "high",
            "description": "Lightweight CRM to track brands and dispensaries discovered via page generation. Track claim status, dedup per state, auto-detect national brands (3+ states). Add as sidebar item in Admin Console.",
            "acceptance_tests": [
                "test_crm_brand_upsert",
                "test_crm_dispensary_upsert",
                "test_national_brand_detection",
                "test_claim_status_display"
            ],
            "phases": [
                "Phase 1: CRM Service (upsertBrand, upsertDispensary) ‚úÖ",
                "Phase 2: Integration with Page Generator",
                "Phase 3: CRM Tab UI (list, filter, search)",
                "Phase 4: Claim Status Management"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_national_rollout"
            ],
            "area": "full_stack",
            "created_at": "2025-12-17T15:18:00Z"
        },
        {
            "id": "feat_apify_leafly_integration",
            "title": "Apify Leafly Scraper Integration (Radar Competitive Intel)",
            "status": "in_progress",
            "priority": "high",
            "description": "Integrate Apify's Leafly scraper to create competitive menu data firehose. Ingest dispensary/product/offer data into Firestore. Feed Radar for pricing bands, promo tracking, and assortment gap analysis.",
            "acceptance_tests": [
                "test_leafly_single_store_scan",
                "test_leafly_state_scan",
                "test_dataset_ingestion",
                "test_ezal_pricing_bands",
                "test_ezal_promo_tracking"
            ],
            "phases": [
                "Phase 1: Leafly Connector Service",
                "Phase 2: Firestore Ingestion Layout",
                "Phase 3: Admin UI (Competitor Watchlist)",
                "Phase 4: Radar Tools Integration"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_organic_growth_seo"
            ],
            "area": "backend",
            "created_at": "2025-12-17T16:00:00Z"
        },
        {
            "id": "feat_qr_code_generator",
            "title": "QR Code Generator Tool (All Roles)",
            "status": "backlog",
            "priority": "medium",
            "description": "Integrate Apify QR Code Generator Actor (sSuyCJwnWG9SzjFtf) to generate customizable QR codes for brands, dispensaries, and marketing campaigns. Supports bulk generation, custom colors, logo overlays, and multiple formats (PNG/SVG). Available for all roles.",
            "acceptance_tests": [
                "test_qr_single_generation",
                "test_qr_bulk_generation",
                "test_qr_with_logo",
                "test_qr_available_all_roles"
            ],
            "phases": [
                "Phase 1: QR Connector Service",
                "Phase 2: QR UI Component (all dashboards)",
                "Phase 3: Agent Tool Integration",
                "Phase 4: Batch Export for Print"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_apify_leafly_integration"
            ],
            "area": "full_stack",
            "created_at": "2025-12-17T16:45:00Z",
            "apify_actor_id": "sSuyCJwnWG9SzjFtf"
        },
        {
            "id": "feat_gmaps_scraper_integration",
            "title": "Google Maps Scraper Integration (Dispensary Discovery)",
            "status": "in_progress",
            "priority": "high",
            "description": "Integrate Apify Google Maps Scraper to discover dispensaries beyond Leafly/CannMenus. Get ratings, reviews, hours, photos, and contact info. Use for enrichment and competitor intel.",
            "acceptance_tests": [
                "test_gmaps_dispensary_search",
                "test_gmaps_data_ingestion",
                "test_gmaps_ui_integration"
            ],
            "phases": [
                "Phase 1: Types + Connector Service ‚úÖ",
                "Phase 2: Firestore Ingestion ‚úÖ",
                "Phase 3: Admin UI Integration ‚úÖ",
                "Phase 4: Dispensary Enrichment Pipeline"
            ],
            "owner": "antigravity",
            "dependencies": [
                "feat_apify_leafly_integration"
            ],
            "area": "backend",
            "created_at": "2025-12-17T17:10:00Z",
            "apify_task_id": "Kb9uh4qmh4s76kDan"
        },
        {
            "id": "feat_ezal_lite_snapshots",
            "title": "Radar Lite - Cheap Competitive Snapshots (~$0.10/snapshot)",
            "status": "planning",
            "priority": "high",
            "description": "Use Apify Website Content Crawler for cheap (~$0.05-0.12) competitive snapshots. Monthly cached summaries with regex-based extraction (no LLM). Free lead magnet tier. Cache for 30 days, refresh via scheduler.",
            "acceptance_tests": [
                "test_lite_snapshot_trigger",
                "test_regex_price_extraction",
                "test_30day_cache_rule",
                "test_cost_under_15_cents"
            ],
            "phases": [
                "Phase 1: Types + Lite Connector",
                "Phase 2: Regex Extraction Engine",
                "Phase 3: 30-day Cache + Scheduler",
                "Phase 4: UI Integration",
                "Phase 5: Cost Telemetry"
            ],
            "cost_model": {
                "lite_free_tier": "$0.05-0.12 per snapshot",
                "deep_paid_tier": "$1-2+ per snapshot",
                "cache_duration_days": 30,
                "proxy_strategy": "ladder (none ‚Üí datacenter ‚Üí residential)"
            },
            "owner": "antigravity",
            "dependencies": [
                "feat_apify_leafly_integration",
                "feat_gmaps_scraper_integration"
            ],
            "area": "backend",
            "created_at": "2025-12-17T18:20:00Z",
            "apify_actor": "apify~website-content-crawler"
        },
        {
            "id": "feat_customer_marketplace_v1",
            "title": "Customer Marketplace + Google Places + Ember Actions + Reviews",
            "status": "in_progress",
            "description": "Major customer-role upgrade turning Markitbot into a consumer intent router. Includes /shop marketplace, Google Places enrichment, Ember actionable commands, and first-party reviews system.",
            "acceptance_tests": [
                "test_shop_page_renders",
                "test_places_enrichment",
                "test_smokey_find_action",
                "test_smokey_alert_create",
                "test_smokey_cart_prepare",
                "test_review_create_flow",
                "test_review_moderation",
                "test_google_attribution_display"
            ],
            "phases": [
                "Phase A: Places Enrichment Layer",
                "Phase B: Ember Actions API",
                "Phase C: /shop Marketplace",
                "Phase D: First-Party Reviews",
                "Phase E: Alerts + Jobs",
                "Phase F: Rollout + QA"
            ],
            "spec_version": "v1.0",
            "owner": "product_ceo",
            "dependencies": [
                "feat_gmaps_scraper_integration",
                "feat_claimed_page_checkout"
            ],
            "area": "full_stack",
            "created_at": "2025-12-18T04:15:00Z"
        },
        {
            "id": "feat_agent_playground",
            "title": "Agent Playground (Homepage Lead Magnet)",
            "status": "passing",
            "description": "Interactive AI agent demos in hero section. Tabbed interface (Ember, Drip, Pulse, Radar), rate limiting (5/day), result gating (3 shown, 10 locked), email capture with Mailjet welcome email.",
            "acceptance_tests": [
                "test_demo_api_response",
                "test_lead_capture_flow",
                "test_rate_limiting_logic",
                "test_result_gating"
            ],
            "test_results": {
                "demo_api": "passed (15 tests)"
            },
            "completed_at": "2025-12-27T13:00:00Z",
            "owner": "antigravity",
            "dependencies": [],
            "area": "frontend"
        },
        {
            "id": "refactor_smokey_chat",
            "title": "Ember Chat Refactor & Rename",
            "status": "passing",
            "description": "Unified Agent Playground UI into 'Ember Chat', moved to hero center, and renamed 'Ask Baked HQ' globally.",
            "acceptance_tests": [
                "test_puff_chat_placeholder"
            ],
            "completed_at": "2025-12-27T14:30:00Z",
            "owner": "antigravity",
            "dependencies": [
                "feat_agent_playground"
            ],
            "area": "frontend"
        },
        {
            "id": "feat_editable_playbooks",
            "title": "Editable Playbooks System (n8n/Zapier Style)",
            "status": "passing",
            "description": "Playbook editing with ownership model, smart approval detection, visual step builder, natural language creation via AI.",
            "acceptance_tests": [
                "test_playbook_crud",
                "test_ownership_checks",
                "test_approval_detection",
                "test_natural_language_parsing"
            ],
            "completed_at": "2025-12-27T11:00:00Z",
            "owner": "antigravity",
            "dependencies": [],
            "area": "full_stack"
        },
        {
            "id": "feat_super_user_performance_tool",
            "title": "Super User: Frontend Performance Audit Tool",
            "status": "backlog",
            "priority": "medium",
            "description": "Expose the 'audit-performance.ts' script in the CEO Dashboard. Allow Super Users to trigger a Lighthouse audit for any product or brand page directly from the UI and view results in real-time.",
            "acceptance_tests": [
                "test_performance_tool_ui_exists",
                "test_trigger_audit_from_dashboard",
                "test_results_display_in_ui"
            ],
            "owner": "ai_builder_swarm",
            "area": "frontend",
            "created_at": "2026-01-01T09:00:00Z"
        },
        {
            "id": "feat_slack_integration",
            "title": "Slack Integration (Global Connections Hub)",
            "status": "backlog",
            "priority": "high",
            "description": "Implement Slack integration to allow agents to broadcast updates to channels (e.g. #execmode). Part of the Global Connections Hub.",
            "acceptance_tests": [
                "test_slack_auth_flow",
                "test_slack_message_post",
                "test_channel_selection_ui"
            ],
            "owner": "antigravity",
            "area": "backend",
            "created_at": "2026-01-04T06:00:00Z"
        },
        {
            "id": "feat_apify_weedmaps_scraper",
            "title": "Apify WeedMaps Scraper Integration",
            "status": "backlog",
            "priority": "high",
            "description": "Integrate Apify WeedMaps scraper for the 'Cannabis Menu Scraper' Talk Track. Enable fast, daily menu extraction versus browser automation.",
            "acceptance_tests": [
                "test_apify_weedmaps_run",
                "test_menu_data_mapping",
                "test_integration_with_talk_track"
            ],
            "owner": "antigravity",
            "area": "backend",
            "created_at": "2026-01-04T06:00:00Z"
        },
        {
            "id": "task_test_crm_service",
            "title": "Unit Test: CRM Service Deletion",
            "status": "pending",
            "priority": "high",
            "description": "Implement unit tests for deleteCrmEntity in src/server/services/crm-service.ts. Tests failed due to Jest environment issues with 'use server' and firebase-admin imports.",
            "acceptance_tests": [
                "tests/server/services/crm-service.test.ts passes"
            ],
            "owner": "ai_builder_swarm",
            "area": "testing",
            "created_at": "2026-01-14T23:59:00Z"
        }
    ]
}
