{
    "displayName": "Markitbot Production Dashboard",
    "mosaicLayout": {
        "columns": 12,
        "tiles": [
            {
                "width": 6,
                "height": 4,
                "widget": {
                    "title": "Application Error Rate",
                    "xyChart": {
                        "dataSets": [
                            {
                                "timeSeriesQuery": {
                                    "timeSeriesFilter": {
                                        "filter": "resource.type=\"cloud_run_revision\" AND metric.type=\"run.googleapis.com/request_count\"",
                                        "aggregation": {
                                            "alignmentPeriod": "60s",
                                            "perSeriesAligner": "ALIGN_RATE",
                                            "crossSeriesReducer": "REDUCE_SUM",
                                            "groupByFields": [
                                                "metric.response_code_class"
                                            ]
                                        }
                                    }
                                },
                                "plotType": "LINE",
                                "targetAxis": "Y1"
                            }
                        ],
                        "yAxis": {
                            "label": "Requests/sec",
                            "scale": "LINEAR"
                        }
                    }
                }
            },
            {
                "xPos": 6,
                "width": 6,
                "height": 4,
                "widget": {
                    "title": "Response Time (P95)",
                    "xyChart": {
                        "dataSets": [
                            {
                                "timeSeriesQuery": {
                                    "timeSeriesFilter": {
                                        "filter": "resource.type=\"cloud_run_revision\" AND metric.type=\"run.googleapis.com/request_latencies\"",
                                        "aggregation": {
                                            "alignmentPeriod": "60s",
                                            "perSeriesAligner": "ALIGN_DELTA",
                                            "crossSeriesReducer": "REDUCE_PERCENTILE_95"
                                        }
                                    }
                                },
                                "plotType": "LINE",
                                "targetAxis": "Y1"
                            }
                        ],
                        "yAxis": {
                            "label": "Milliseconds",
                            "scale": "LINEAR"
                        }
                    }
                }
            },
            {
                "yPos": 4,
                "width": 6,
                "height": 4,
                "widget": {
                    "title": "Firestore Operations",
                    "xyChart": {
                        "dataSets": [
                            {
                                "timeSeriesQuery": {
                                    "timeSeriesFilter": {
                                        "filter": "resource.type=\"firestore_database\" AND metric.type=\"firestore.googleapis.com/document/read_count\"",
                                        "aggregation": {
                                            "alignmentPeriod": "60s",
                                            "perSeriesAligner": "ALIGN_RATE",
                                            "crossSeriesReducer": "REDUCE_SUM"
                                        }
                                    }
                                },
                                "plotType": "LINE",
                                "targetAxis": "Y1"
                            }
                        ],
                        "yAxis": {
                            "label": "Operations/sec",
                            "scale": "LINEAR"
                        }
                    }
                }
            },
            {
                "xPos": 6,
                "yPos": 4,
                "width": 6,
                "height": 4,
                "widget": {
                    "title": "Sentry Error Count",
                    "scorecard": {
                        "timeSeriesQuery": {
                            "timeSeriesFilter": {
                                "filter": "resource.type=\"generic_task\" AND metric.type=\"logging.googleapis.com/user/sentry_errors\"",
                                "aggregation": {
                                    "alignmentPeriod": "60s",
                                    "perSeriesAligner": "ALIGN_RATE",
                                    "crossSeriesReducer": "REDUCE_SUM"
                                }
                            }
                        },
                        "sparkChartView": {
                            "sparkChartType": "SPARK_LINE"
                        },
                        "thresholds": [
                            {
                                "value": 10,
                                "color": "YELLOW",
                                "direction": "ABOVE"
                            },
                            {
                                "value": 50,
                                "color": "RED",
                                "direction": "ABOVE"
                            }
                        ]
                    }
                }
            }
        ]
    }
}