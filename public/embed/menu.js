(function(){'use strict';var u="https://markitbot.com",t=null,d=null;function B(e){let n=e.brandId;if(!n)return console.error("[Markitbot Menu] brandId is required"),"";let o=new URLSearchParams;e.layout&&o.set("layout",e.layout),e.showCart===false&&o.set("showCart","false"),e.showCategories===false&&o.set("showCategories","false"),e.primaryColor&&o.set("primaryColor",e.primaryColor.replace("#",""));let i=o.toString();return `${u}/embed/menu/${n}${i?`?${i}`:""}`}function f(){let e=document.getElementById("markitbot-menu");return e||(e=document.createElement("div"),e.id="markitbot-menu",document.body.appendChild(e)),e}function s(e){let n={...window.BakedBotConfig,...e};if(!n.brandId){console.error("[Markitbot Menu] brandId is required in BakedBotConfig");return}l();let o=f(),i=B(n);i&&(t=document.createElement("iframe"),t.src=i,t.id="markitbot-menu-iframe",t.title="Markitbot Menu",t.allow="payment",t.setAttribute("loading","lazy"),t.style.cssText=`
        width: ${n.width||"100%"};
        height: ${n.height||"600px"};
        border: none;
        display: block;
        max-width: 100%;
    `,o.appendChild(t),d=r=>{if(!r.origin.includes("markitbot.com")&&!r.origin.includes("localhost"))return;let a=r.data;a?.type==="markitbot:resize"&&t&&(t.style.height=`${a.payload.height}px`),a?.type?.startsWith("markitbot:")&&window.dispatchEvent(new CustomEvent(a.type,{detail:a.payload}));},window.addEventListener("message",d),console.log("[Markitbot Menu] Initialized",{brandId:n.brandId}));}function l(){t&&(t.remove(),t=null),d&&(window.removeEventListener("message",d),d=null);}window.BakedBotMenu={init:s,destroy:l};typeof window<"u"&&window.BakedBotConfig?.brandId&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>s()):s());})();
